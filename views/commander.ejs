<h1 class="h4 mb-3">Commander / Demander un devis</h1>
<p class="text-muted">Fournissez les informations. Un retour est envoyé rapidement. Paiement possible via Revolut après validation du devis.</p>

<form method="post" action="/commander" enctype="multipart/form-data" class="needs-validation">
  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Nom complet</label>
      <input name="nom" class="form-control <%= errors.nom?'is-invalid':'' %>" value="<%= form.nom||'' %>">
      <% if (errors.nom) { %><div class="invalid-feedback"><%= errors.nom %></div><% } %>
    </div>
    <div class="col-md-6">
      <label class="form-label">Téléphone</label>
      <input name="telephone" class="form-control" value="<%= form.telephone||'' %>">
    </div>
    <div class="col-md-6">
      <label class="form-label">Email</label>
      <input type="email" name="email" class="form-control <%= errors.contact?'is-invalid':'' %>" value="<%= form.email||'' %>">
      <% if (errors.contact) { %><div class="invalid-feedback"><%= errors.contact %></div><% } %>
    </div>

    <div class="col-md-6">
      <label class="form-label">Type de prestation</label>
      <select name="typePrestation" class="form-select <%= errors.typePrestation?'is-invalid':'' %>">
        <option value="">-- choisir --</option>
        <option <%= form.typePrestation==='Traduction'?'selected':'' %>>Traduction</option>
        <option <%= form.typePrestation==='Interprétariat'?'selected':'' %>>Interprétariat</option>
      </select>
      <% if (errors.typePrestation) { %><div class="invalid-feedback"><%= errors.typePrestation %></div><% } %>
    </div>

    <div class="col-md-6">
      <label class="form-label">Langue source</label>
      <select name="langueSource" class="form-select <%= errors.langueSource?'is-invalid':'' %>">
        <option value="">-- choisir --</option>
        <option <%= form.langueSource==='Français'?'selected':'' %>>Français</option>
        <option <%= form.langueSource==='Arabe'?'selected':'' %>>Arabe</option>
      </select>
      <% if (errors.langueSource) { %><div class="invalid-feedback"><%= errors.langueSource %></div><% } %>
    </div>
    <div class="col-md-6">
      <label class="form-label">Langue cible</label>
      <select name="langueCible" class="form-select <%= errors.langueCible?'is-invalid':'' %>">
        <option value="">-- choisir --</option>
        <option <%= form.langueCible==='Français'?'selected':'' %>>Français</option>
        <option <%= form.langueCible==='Arabe'?'selected':'' %>>Arabe</option>
      </select>
      <% if (errors.langueCible) { %><div class="invalid-feedback"><%= errors.langueCible %></div><% } %>
    </div>

    <div class="col-md-6">
      <label class="form-label">Type de document</label>
      <input name="typeDocument" class="form-control <%= errors.typeDocument?'is-invalid':'' %>" placeholder="Acte de naissance, mariage, diplôme..." value="<%= form.typeDocument||'' %>">
      <% if (errors.typeDocument) { %><div class="invalid-feedback"><%= errors.typeDocument %></div><% } %>
    </div>

    <div class="col-md-3">
      <label class="form-label">Nombre de pages</label>
      <input type="number" min="1" name="nbPages" class="form-control" value="<%= form.nbPages||'' %>">
    </div>

    <div class="col-md-3">
      <label class="form-label">Délai</label>
      <select name="delai" class="form-select">
        <option <%= form.delai==='Normal'?'selected':'' %>>Normal</option>
        <option <%= form.delai==='Urgent'?'selected':'' %>>Urgent</option>
      </select>
    </div>

    <div class="col-12">
      <label class="form-label">Commentaire</label>
      <textarea name="commentaire" class="form-control" rows="4"><%= form.commentaire||'' %></textarea>
    </div>

    <div class="col-md-6">
      <label class="form-label">Joindre un fichier (PDF/JPG/PNG, max 10 Mo)</label>
      <input type="file" name="fichier" class="form-control">
    </div>

    <div class="col-md-6">
      <label class="form-label">Montant à régler maintenant (optionnel, €)</label>
      <input type="number" step="0.01" min="0" name="montant" class="form-control" value="<%= form.montant||'' %>">
      <div class="form-text">Paiement via Revolut après envoi du formulaire.</div>
    </div>

    <div class="col-12">
      <button class="btn btn-primary">Envoyer la demande</button>
      <a href="<%= profile.revolutBase %>" target="_blank" class="btn btn-outline-success">Payer via Revolut</a>
    </div>
  </div>
</form>
